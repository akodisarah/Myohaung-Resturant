var localstore={s:window.localStorage,type:'localStorage',set:function(key,val){this.s.setItem(key,JSON.stringify(val));return val;},get:function(key){var value=this.s.getItem(key);if(typeof value!='string'){return undefined}
try{return JSON.parse(value)}
catch(e){return value||undefined}},remove:function(key){this.s.removeItem(key)},removeAll:function(){this.s.clear()},getAll:function(){var ret={};for(var i=0;i<this.s.length;i++){var key=this.s.key(i);ret[key]=this.get(key);}
return ret;}};var sessionstore={s:window.sessionStorage,type:'sessionStorage',set:localstore.set,get:localstore.get,remove:localstore.remove,removeAll:localstore.removeAll,getAll:localstore.getAll};var cookiestore={s:document.cookie,type:'cookie',set:function(name,value,expires,path,secure){if(value!==undefined&&typeof(value)==="object")var valueToUse=JSON.stringify(value);else var valueToUse=encodeURIComponent(value);var c=name+"="+valueToUse+
(expires?("; expires="+new Date(expires).toUTCString()):'')+"; path="+(path||'/')+
(secure?"; secure":'');document.cookie=c;},get:function(name){var cookies=this.getAllRawOrProcessed(false);if(cookies.hasOwnProperty(name))return this.processValue(cookies[name]);else return undefined;},processValue:function(value){if(value.substring(0,1)=="{"){try{return JSON.parse(value);}
catch(e){return value;}}
if(value=="undefined")return undefined;return decodeURIComponent(value);},getAllRawOrProcessed:function(process){var cookies=document.cookie.split('; '),s={};if(cookies.length===1&&cookies[0]==='')return s;for(var i=0;i<cookies.length;i++){var cookie=cookies[i].split('=');if(process)s[cookie[0]]=this.processValue(cookie[1]);else s[cookie[0]]=cookie[1];}
return s;},getAll:function(){return this.getAllRawOrProcessed(true);},remove:function(name){this.set(name,"",-1);},removeAll:function(){var cookies=this.getAll();for(var i in cookies){this.remove(i);}
return this.getAll();}};if(typeof Storage!=="undefined")window.store=localstore;else window.store=cookiestore;(function(exports){function Promise(){this._callbacks=[];}
Promise.prototype.then=function(func,context){var p;if(this._isdone){p=func.apply(context,this.result);}else{p=new Promise();this._callbacks.push(function(){var res=func.apply(context,arguments);if(res&&typeof res.then==='function')
res.then(p.done,p);});}
return p;};Promise.prototype.done=function(){this.result=arguments;this._isdone=true;for(var i=0;i<this._callbacks.length;i++){this._callbacks[i].apply(null,arguments);}
this._callbacks=[];};function join(promises){var p=new Promise();var results=[];if(!promises||!promises.length){p.done(results);return p;}
var numdone=0;var total=promises.length;function notifier(i){return function(){numdone+=1;results[i]=Array.prototype.slice.call(arguments);if(numdone===total){p.done(results);}};}
for(var i=0;i<total;i++){promises[i].then(notifier(i));}
return p;}
function chain(funcs,args){var p=new Promise();if(funcs.length===0){p.done.apply(p,args);}else{funcs[0].apply(null,args).then(function(){funcs.splice(0,1);chain(funcs,arguments).then(function(){p.done.apply(p,arguments);});});}
return p;}
function _encode(data){var result="";if(typeof data==="string"){result=data;}else{var e=encodeURIComponent;for(var k in data){if(data.hasOwnProperty(k)){result+='&'+e(k)+'='+e(data[k]);}}}
return result;}
function new_xhr(){var xhr;if(window.XDomainRequest){xhr=new XDomainRequest();if(typeof xhr.onprogress!="function")xhr.onprogress=function(){};}else if(window.XMLHttpRequest){xhr=new XMLHttpRequest();}else if(window.ActiveXObject){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){xhr=new ActiveXObject("Microsoft.XMLHTTP");}}
return xhr;}
function ajax(method,url,data,headers){var p=new Promise();var xhr,payload;data=data||{};headers=headers||{};try{xhr=new_xhr();}catch(e){p.done(promise.ENOXHR,"");return p;}
payload=_encode(data);if(method==='GET'&&payload){url+='?'+payload;payload=null;}
try{xhr.open(method,url);if(typeof xhr.setRequestHeader!='undefined'){xhr.setRequestHeader('Content-type','application/x-www-form-urlencoded');for(var h in headers){if(headers.hasOwnProperty(h)){xhr.setRequestHeader(h,headers[h]);}}}
function onTimeout(){xhr.abort();p.done(promise.ETIMEOUT,"",xhr);}
var timeout=promise.ajaxTimeout;if(timeout){var tid=setTimeout(onTimeout,timeout);}
xhr.onreadystatechange=function(){if(timeout){clearTimeout(tid);}
if(xhr.readyState===4){var err=(!xhr.status||(xhr.status<200||xhr.status>=300)&&xhr.status!==304);p.done(err,xhr.responseText,xhr);}};xhr.send(payload);}catch(e){if(typeof console!="undefined"&&typeof console.log=="function"){console.log("Failure to open xhr: ",e);p.done(-1,"unsupported",xhr);}}
return p;}
function _ajaxer(method){return function(url,data,headers){return ajax(method,url,data,headers);};}
var promise={Promise:Promise,join:join,chain:chain,ajax:ajax,get:_ajaxer('GET'),post:_ajaxer('POST'),put:_ajaxer('PUT'),del:_ajaxer('DELETE'),ENOXHR:1,ETIMEOUT:2,ajaxTimeout:0};if(typeof define==='function'&&define.amd){define(function(){return promise;});}else{exports.promise=promise;}})(this);;(function(name,context,definition){if(typeof module!=='undefined'&&module.exports){module.exports=definition();}
else if(typeof define==='function'&&define.amd){define(definition);}
else{context[name]=definition();}})('Fingerprint',this,function(){'use strict';var Fingerprint=function(options){var nativeForEach,nativeMap;nativeForEach=Array.prototype.forEach;nativeMap=Array.prototype.map;this.each=function(obj,iterator,context){if(obj===null){return;}
if(nativeForEach&&obj.forEach===nativeForEach){obj.forEach(iterator,context);}else if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){if(iterator.call(context,obj[i],i,obj)==={})return;}}else{for(var key in obj){if(obj.hasOwnProperty(key)){if(iterator.call(context,obj[key],key,obj)==={})return;}}}};this.map=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&obj.map===nativeMap)return obj.map(iterator,context);this.each(obj,function(value,index,list){results[results.length]=iterator.call(context,value,index,list);});return results;};if(typeof options=='object'){this.hasher=options.hasher;this.screen_resolution=options.screen_resolution;this.canvas=options.canvas;this.ie_activex=options.ie_activex;}else if(typeof options=='function'){this.hasher=options;}};Fingerprint.prototype={get:function(){var keys=[];keys.push(navigator.userAgent);keys.push(navigator.language);keys.push(screen.colorDepth);if(this.screen_resolution){var resolution=this.getScreenResolution();if(typeof resolution!=='undefined'){keys.push(this.getScreenResolution().join('x'));}}
keys.push(new Date().getTimezoneOffset());keys.push(this.hasSessionStorage());keys.push(this.hasLocalStorage());keys.push(!!window.indexedDB);if(document.body){keys.push(typeof(document.body.addBehavior));}else{keys.push(typeof undefined);}
keys.push(typeof(window.openDatabase));keys.push(navigator.cpuClass);keys.push(navigator.platform);keys.push(navigator.doNotTrack);keys.push(this.getPluginsString());if(this.canvas&&this.isCanvasSupported()){keys.push(this.getCanvasFingerprint());}
if(this.hasher){return this.hasher(keys.join('###'),31);}else{return this.murmurhash3_32_gc(keys.join('###'),31);}},murmurhash3_32_gc:function(key,seed){var remainder,bytes,h1,h1b,c1,c2,k1,i;remainder=key.length&3;bytes=key.length-remainder;h1=seed;c1=0xcc9e2d51;c2=0x1b873593;i=0;while(i<bytes){k1=((key.charCodeAt(i)&0xff))|((key.charCodeAt(++i)&0xff)<<8)|((key.charCodeAt(++i)&0xff)<<16)|((key.charCodeAt(++i)&0xff)<<24);++i;k1=((((k1&0xffff)*c1)+((((k1>>>16)*c1)&0xffff)<<16)))&0xffffffff;k1=(k1<<15)|(k1>>>17);k1=((((k1&0xffff)*c2)+((((k1>>>16)*c2)&0xffff)<<16)))&0xffffffff;h1^=k1;h1=(h1<<13)|(h1>>>19);h1b=((((h1&0xffff)*5)+((((h1>>>16)*5)&0xffff)<<16)))&0xffffffff;h1=(((h1b&0xffff)+0x6b64)+((((h1b>>>16)+0xe654)&0xffff)<<16));}
k1=0;switch(remainder){case 3:k1^=(key.charCodeAt(i+2)&0xff)<<16;case 2:k1^=(key.charCodeAt(i+1)&0xff)<<8;case 1:k1^=(key.charCodeAt(i)&0xff);k1=(((k1&0xffff)*c1)+((((k1>>>16)*c1)&0xffff)<<16))&0xffffffff;k1=(k1<<15)|(k1>>>17);k1=(((k1&0xffff)*c2)+((((k1>>>16)*c2)&0xffff)<<16))&0xffffffff;h1^=k1;}
h1^=key.length;h1^=h1>>>16;h1=(((h1&0xffff)*0x85ebca6b)+((((h1>>>16)*0x85ebca6b)&0xffff)<<16))&0xffffffff;h1^=h1>>>13;h1=((((h1&0xffff)*0xc2b2ae35)+((((h1>>>16)*0xc2b2ae35)&0xffff)<<16)))&0xffffffff;h1^=h1>>>16;return h1>>>0;},hasLocalStorage:function(){try{return!!window.localStorage;}catch(e){return true;}},hasSessionStorage:function(){try{return!!window.sessionStorage;}catch(e){return true;}},isCanvasSupported:function(){var elem=document.createElement('canvas');return!!(elem.getContext&&elem.getContext('2d'));},isIE:function(){if(navigator.appName==='Microsoft Internet Explorer'){return true;}else if(navigator.appName==='Netscape'&&/Trident/.test(navigator.userAgent)){return true;}
return false;},getPluginsString:function(){if(this.isIE()&&this.ie_activex){return this.getIEPluginsString();}else{return this.getRegularPluginsString();}},getRegularPluginsString:function(){return this.map(navigator.plugins,function(p){var mimeTypes=this.map(p,function(mt){return[mt.type,mt.suffixes].join('~');}).join(',');return[p.name,p.description,mimeTypes].join('::');},this).join(';');},getIEPluginsString:function(){if(window.ActiveXObject){var names=['ShockwaveFlash.ShockwaveFlash','AcroPDF.PDF','PDF.PdfCtrl','QuickTime.QuickTime','rmocx.RealPlayer G2 Control','rmocx.RealPlayer G2 Control.1','RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)','RealVideo.RealVideo(tm) ActiveX Control (32-bit)','RealPlayer','SWCtl.SWCtl','WMPlayer.OCX','AgControl.AgControl','Skype.Detection'];return this.map(names,function(name){try{new ActiveXObject(name);return name;}catch(e){return null;}}).join(';');}else{return"";}},getScreenResolution:function(){return[screen.height,screen.width];},getCanvasFingerprint:function(){var canvas=document.createElement('canvas');var ctx=canvas.getContext('2d');var txt='http://valve.github.io';ctx.textBaseline="top";ctx.font="14px 'Arial'";ctx.textBaseline="alphabetic";ctx.fillStyle="#f60";ctx.fillRect(125,1,62,20);ctx.fillStyle="#069";ctx.fillText(txt,2,15);ctx.fillStyle="rgba(102, 204, 0, 0.7)";ctx.fillText(txt,4,17);return canvas.toDataURL();}};return Fingerprint;});(function(){try{(function(){if(typeof window.CustomEvent==="function")return false;if(typeof window.Event==="undefined")return false;if(typeof window.Event.prototype==="undefined")return false;function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}
CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;})();function appendWindowLoadFunction(newFunction){if(document.readyState==="complete"){newFunction();}else{if(typeof window.onload!='function'){window.onload=newFunction;}else{var oldOnLoad=window.onload;window.onload=function(){oldOnLoad();newFunction();}}}}
var roxanne={handlers:{},completed_actions:{},forms_started:[],scheme:'https',host:'ref.dealerinspire.com:',token:'NDE3NjUwMzQz',site_id:'97345',visit_id_ref:'di_roxanne[visit_id]',visitor_id_ref:'di_roxanne[visitor_id]',lead_view_ref:'di_roxanne[last_lead_view]',roxanne_ref:'Roxanne_B',init:function(){this.visit_tracking.init();},visit_tracking:{mixpanel:'',init:function(){if(!this.exists()){this.create();}else{this.update();}},exists:function(){var roxie=localstore.get(roxanne.roxanne_ref);var currTime=Math.round((new Date()).getTime()/ 1000);return!(typeof roxie=='undefined'||((currTime-roxie)>(60*60*1)));},create:function(){var data={};data.referrer=document.referrer;data.browser_fingerprint=null;if(typeof Fingerprint!="undefined"){data.browser_fingerprint=new Fingerprint().get();}
data.user_agent=navigator.userAgent;var tp=cookiestore.get('tp_referral');if(typeof tp!='undefined'){data.tp_referral_id=tp;}
var cl=cookiestore.get('_jsuid');if(typeof cl!='undefined'){data.clicky_jsuid=cl;}
if(this.mixpanel){var mp=cookiestore.get('mp_'+this.mixpanel+'_mixpanel');if(typeof mp!='undefined'){data.mixpanel_id=mp.distinct_id;}}
this.track(data);},update:function(){localstore.set('Roxanne_B',Math.round((new Date()).getTime()/ 1000));this.on_ready();},track:function(data){var self=this;var url=roxanne.scheme+'://'+roxanne.host+'/site/'+roxanne.site_id+'/visitors/'+roxanne.token;var ajax_func=function(error,text,xhr){if(!error){self.on_success(text,xhr);}else{self.on_failure(error,text,xhr);}};var promise_func=function(){promise.post(url,data).then(ajax_func);};appendWindowLoadFunction(promise_func);},on_ready:function(){roxanne.do_actions('ready');},on_success:function(text,xhr){var jtext=JSON.parse(text);localstore.set(roxanne.roxanne_ref,Math.round((new Date()).getTime()/ 1000));cookiestore.set(roxanne.visit_id_ref,jtext.id);cookiestore.set(roxanne.visitor_id_ref,jtext.visitor_id);this.on_ready();},on_failure:function(error,text,xhr){this.on_ready();}},event_tracking:{page_view_track:false,event_queue:[],queue_event:function(data){roxanne.event_tracking.event_queue.push(data);},run_event_queue:function(){for(var event_index in roxanne.event_tracking.event_queue){roxanne.event_tracking.track(roxanne.event_tracking.event_queue[event_index]);}
roxanne.event_tracking.event_queue=[];},process:function(e_data){if(roxanne.event_tracking.page_view_track===false){if(e_data.name!="page_view"){return roxanne.event_tracking.queue_event(e_data);}}
roxanne.event_tracking.track(e_data);roxanne.event_tracking.run_event_queue();},track:function(data){var self=this;var vid=cookiestore.get(roxanne.visit_id_ref);var event_data=data;if(typeof window.CustomEvent=='function'){var evt=new CustomEvent("di_event",{detail:event_data});window.dispatchEvent(evt);}
if(typeof vid==='undefined'||!vid){return false;}
var url=roxanne.scheme+'://'+roxanne.host+'/visit/'+vid+"/events/"+roxanne.token;var ajax_func=function(error,text,xhr){if(data.name=='page_view'){roxanne.event_tracking.page_view_track=true;roxanne.event_tracking.run_event_queue();}
if(!error){self.on_success(text,xhr);}else{self.on_failure(error,text,xhr);}};var promise_func=function(){if('custom_data'in data&&data.custom_data!=null&&JSON&&typeof(JSON.stringify)=="function"){data.custom_data=JSON.stringify(data.custom_data);}
promise.post(url,data).then(ajax_func);};appendWindowLoadFunction(promise_func);},on_success:function(text,xhr){},on_failure:function(error,text,xhr){}},add_action:function(hook,func){if(hook in this.completed_actions){return func();}
if(typeof this.handlers[hook]=='undefined'){this.handlers[hook]=[];}
this.handlers[hook].push(func);},do_actions:function(hook){if(typeof this.handlers[hook]!='undefined'){for(var f in this.handlers[hook]){this.handlers[hook][f]();}}
this.handlers[hook]=[];this.completed_actions[hook]=true;}};if(typeof window.addEventListener!=="undefined"){window.addEventListener('di_ev',function(eve){roxanne.add_action('ready',function(){var e_data={};if('detail'in eve){e_data=eve.detail;}
roxanne.event_tracking.process(e_data);});},false);}
roxanne.init();if(typeof window.CustomEvent=='function'){var evt=new CustomEvent("di_ev",{'detail':{'name':'page_view','label':window.location.href,'default_score':1}});window.dispatchEvent(evt);}}catch(err){if(typeof console!=="undefined")console.log("Ref: "+err.message);}})();